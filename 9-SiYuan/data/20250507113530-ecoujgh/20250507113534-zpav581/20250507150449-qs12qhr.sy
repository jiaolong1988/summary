{"ID":"20250507150449-qs12qhr","Spec":"1","Type":"NodeDocument","Properties":{"id":"20250507150449-qs12qhr","title":"docker 常用命令","type":"doc","updated":"20250507155641"},"Children":[{"ID":"20250507155030-9ah14dr","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250507155030-9ah14dr","updated":"20250507155641"},"Children":[{"Type":"NodeText","Data":"常用命令"}]},{"ID":"20250507150510-kte4tm1","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250507150510-kte4tm1","updated":"20250507155641"}},{"ID":"20250507155341-io1i4sc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250507155341-io1i4sc","updated":"20250507155641"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"#拉取镜像\ndocker pull ollama/ollama:v0.5.12\n\n#定期清理无用镜像\ndocker image prune  # 删除悬空镜像\n\n#查看拉取日志\njournalctl -u docker --no-pager | grep \"pull\"\n\n#查看容器启动日志\ndocker logs ollama容器ID   \n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250507150510-hcr6jmy","Type":"NodeParagraph","Properties":{"id":"20250507150510-hcr6jmy","updated":"20250507150510"}},{"ID":"20250507150510-kvisy6v","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250507150510-kvisy6v","updated":"20250507150510"},"Children":[{"Type":"NodeText","Data":"镜像查询"}]},{"ID":"20250507150510-cimkk67","Type":"NodeTable","TableAligns":[0,0,0],"Properties":{"colgroup":"||","id":"20250507150510-cimkk67","updated":"20250507150510"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"维度"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker search"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker inspect"},{"Type":"NodeText","Data":"​"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"数据来源"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"远程仓库（Docker Hub）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"本地 Docker 环境"}]}]}]},{"ID":"20250507150510-zrfiqmq","Type":"NodeParagraph","Properties":{"id":"20250507150510-zrfiqmq","updated":"20250507150510"}},{"ID":"20250507154942-gxrin7g","Type":"NodeParagraph","Properties":{"id":"20250507154942-gxrin7g","updated":"20250507154942"}},{"ID":"20250507155127-90ru22d","Type":"NodeParagraph","Properties":{"id":"20250507155127-90ru22d","updated":"20250507155127"}},{"ID":"20250507155135-d1xbpkh","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250507155135-d1xbpkh","updated":"20250507155558"},"Children":[{"Type":"NodeText","Data":"启动容器"}]},{"ID":"20250507154935-2qaizme","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250507154935-2qaizme","updated":"20250507155558"},"Children":[{"Type":"NodeText","Data":"一、"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动已存在的容器并设置自启动"}]},{"ID":"20250507154935-v8jbvdf","Type":"NodeBlockquote","Properties":{"id":"20250507154935-v8jbvdf","updated":"20250507154950"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20250507154950-hob3p8k","Type":"NodeParagraph","Properties":{"id":"20250507154950-hob3p8k","updated":"20250507154950"},"Children":[{"Type":"NodeText","Data":"若容器已创建但未运行（可能处于停止状态），需先启动容器，再通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker update"},{"Type":"NodeText","Data":"​ 命令修改其重启策略。"}]}]},{"ID":"20250507154935-d44c3ry","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250507154935-d44c3ry","updated":"20250507154935"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"步骤 1：启动指定容器"}]},{"ID":"20250507154935-0sdzulm","Type":"NodeParagraph","Properties":{"id":"20250507154935-0sdzulm","updated":"20250507154935"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker start"},{"Type":"NodeText","Data":"​ 命令启动目标容器（通过容器名或 ID 标识）："}]},{"ID":"20250507154935-8iwie7t","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250507154935-8iwie7t","updated":"20250507154935"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker start \u003c容器名或ID\u003e\n# 示例：启动名为 my-nginx 的容器\ndocker start my-nginx\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250507154935-5fbome5","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250507154935-5fbome5","updated":"20250507154935"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"步骤 2：设置自启动策略"}]},{"ID":"20250507154935-wkqutwd","Type":"NodeParagraph","Properties":{"id":"20250507154935-wkqutwd","updated":"20250507154935"},"Children":[{"Type":"NodeText","Data":"通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker update"},{"Type":"NodeText","Data":"​ 命令修改容器的重启策略（推荐 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"always"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"unless-stopped"},{"Type":"NodeText","Data":"​）："}]},{"ID":"20250507154935-q3bv5ka","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250507154935-q3bv5ka","updated":"20250507154935"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker update --restart \u003c策略\u003e \u003c容器名或ID\u003e\n# 示例：设置 my-nginx 容器总是自启动\ndocker update --restart always my-nginx\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250507154935-2bh8g0e","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250507154935-2bh8g0e","updated":"20250507155627"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"步骤 3：验证设置"}]},{"ID":"20250507154935-efx9fdv","Type":"NodeParagraph","Properties":{"id":"20250507154935-efx9fdv","updated":"20250507154935"},"Children":[{"Type":"NodeText","Data":"通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker inspect"},{"Type":"NodeText","Data":"​ 检查容器的重启策略是否生效："}]},{"ID":"20250507154935-p2yfzka","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250507154935-p2yfzka","updated":"20250507154935"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker inspect -f '{{.HostConfig.RestartPolicy.Name}}' \u003c容器名或ID\u003e\n# 示例输出（设置成功）：always\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250507155120-srve5jk","Type":"NodeParagraph","Properties":{"id":"20250507155120-srve5jk","updated":"20250507155120"}},{"ID":"20250507155627-6cseb7z","Type":"NodeParagraph","Properties":{"id":"20250507155627-6cseb7z","updated":"20250507155627"}},{"ID":"20250507154935-mpvhrh7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250507154935-mpvhrh7","updated":"20250507155616"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"二、创建新容器时直接设置自启动"}]},{"ID":"20250507154935-ya0vdv8","Type":"NodeParagraph","Properties":{"id":"20250507154935-ya0vdv8","updated":"20250507154935"},"Children":[{"Type":"NodeText","Data":"若需新建容器并同时设置自启动，可在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker run"},{"Type":"NodeText","Data":"​ 命令中直接添加 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--restart"},{"Type":"NodeText","Data":"​ 参数。"}]},{"ID":"20250507154935-qp879fr","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250507154935-qp879fr","updated":"20250507154935"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"命令格式"}]},{"ID":"20250507154935-dc9a417","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250507154935-dc9a417","updated":"20250507154935"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -d --name \u003c容器名\u003e --restart \u003c策略\u003e \u003c镜像名:标签\u003e [其他参数]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250507154935-loh9uk1","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250507154935-loh9uk1","updated":"20250507155311"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"参数说明"}]},{"ID":"20250507154935-y2vk0pc","Type":"NodeList","ListData":{},"Properties":{"id":"20250507154935-y2vk0pc","updated":"20250507155311"},"Children":[{"ID":"20250507154935-yoeeo9i","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250507154935-yoeeo9i","updated":"20250507154935"},"Children":[{"ID":"20250507154935-8sbtbi4","Type":"NodeParagraph","Properties":{"id":"20250507154935-8sbtbi4","updated":"20250507154935"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-d"},{"Type":"NodeText","Data":"​：后台运行容器（分离模式）。"}]}]},{"ID":"20250507154935-lrhsizq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250507154935-lrhsizq","updated":"20250507154935"},"Children":[{"ID":"20250507154935-m6b2npx","Type":"NodeParagraph","Properties":{"id":"20250507154935-m6b2npx","updated":"20250507154935"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--name \u0026lt;容器名\u0026gt;"},{"Type":"NodeText","Data":"​：为容器指定易记的名称（可选但推荐）。"}]}]},{"ID":"20250507154935-ai12p3o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250507154935-ai12p3o","updated":"20250507154935"},"Children":[{"ID":"20250507154935-qkmjge0","Type":"NodeParagraph","Properties":{"id":"20250507154935-qkmjge0","updated":"20250507154935"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--restart \u0026lt;策略\u0026gt;"},{"Type":"NodeText","Data":"​：设置自启动策略（见下文策略说明）。"}]}]},{"ID":"20250507154935-gz743ov","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250507154935-gz743ov","updated":"20250507155311"},"Children":[{"ID":"20250507154935-3ia73ki","Type":"NodeParagraph","Properties":{"id":"20250507154935-3ia73ki","updated":"20250507155311"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"镜像名:标签"},{"Type":"NodeText","Data":"​：容器使用的镜像（如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"nginx:latest"},{"Type":"NodeText","Data":"​）。"}]}]}]},{"ID":"20250507154935-os69rad","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250507154935-os69rad","updated":"20250507154935"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"示例"}]},{"ID":"20250507154935-fgkfhls","Type":"NodeParagraph","Properties":{"id":"20250507154935-fgkfhls","updated":"20250507154935"},"Children":[{"Type":"NodeText","Data":"创建一个名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"my-nginx"},{"Type":"NodeText","Data":"​ 的 Nginx 容器，设置为总是自启动："}]},{"ID":"20250507154935-e00pkbg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250507154935-e00pkbg","updated":"20250507154935"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -d --name my-nginx --restart always nginx:latest\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}