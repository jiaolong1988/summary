{"ID":"20250516145409-v3jllwy","Spec":"1","Type":"NodeDocument","Properties":{"id":"20250516145409-v3jllwy","title":"堆表","type":"doc","updated":"20250517165847"},"Children":[{"ID":"20250516145440-finyxpe","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516145440-finyxpe","updated":"20250516145440"},"Children":[{"Type":"NodeText","Data":"非聚簇索引（Heap Table）的概念"}]},{"ID":"20250516145440-xldqnsd","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516145440-xldqnsd","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"什么是堆表（Heap Table）？"}]},{"ID":"20250516145440-mues140","Type":"NodeParagraph","Properties":{"id":"20250516145440-mues140","updated":"20250516145440"},"Children":[{"Type":"NodeText","Data":"堆表（Heap Table）是一种没有物理存储顺序的表结构。与聚簇索引不同，堆表中的记录没有按照任何特定的顺序存储。这意味着数据在磁盘上的排列是随机的，没有逻辑上的排序规则。因此，堆表也被称为无序表。"}]},{"ID":"20250516145440-nih6mmt","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516145440-nih6mmt","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"特点"}]},{"ID":"20250516145440-1010ymq","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250516145440-1010ymq","updated":"20250516145440"},"Children":[{"ID":"20250516145440-gyulxgz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250516145440-gyulxgz","updated":"20250516145440"},"Children":[{"ID":"20250516145440-xvjdgg7","Type":"NodeParagraph","Properties":{"id":"20250516145440-xvjdgg7","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"无排序规则"},{"Type":"NodeText","Data":"：数据在表中没有固定的顺序，插入数据时会直接追加到表的末尾。"}]}]},{"ID":"20250516145440-ogvulod","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250516145440-ogvulod","updated":"20250516145440"},"Children":[{"ID":"20250516145440-jtn65ox","Type":"NodeParagraph","Properties":{"id":"20250516145440-jtn65ox","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"支持多种索引"},{"Type":"NodeText","Data":"：虽然堆表本身无序，但可以为其创建一个或多个非聚簇索引（Nonclustered Index）。"}]}]},{"ID":"20250516145440-rrh1i2q","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250516145440-rrh1i2q","updated":"20250516145440"},"Children":[{"ID":"20250516145440-wiklqgl","Type":"NodeParagraph","Properties":{"id":"20250516145440-wiklqgl","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"适合频繁插入"},{"Type":"NodeText","Data":"：由于没有排序规则，插入操作通常更快，因为不需要调整数据位置。"}]}]},{"ID":"20250516145440-ifagh8e","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20250516145440-ifagh8e","updated":"20250516145440"},"Children":[{"ID":"20250516145440-ot7yxib","Type":"NodeParagraph","Properties":{"id":"20250516145440-ot7yxib","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"查询效率较低"},{"Type":"NodeText","Data":"：由于数据无序，查询可能需要全表扫描，性能较差。"}]}]}]},{"ID":"20250516145440-pn8alqs","Type":"NodeThematicBreak","Properties":{"id":"20250516145440-pn8alqs","updated":"20250516145440"}},{"ID":"20250516145440-fxk954f","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516145440-fxk954f","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"堆表与非聚簇索引的关系"}]},{"ID":"20250516145440-y9bkfa0","Type":"NodeParagraph","Properties":{"id":"20250516145440-y9bkfa0","updated":"20250516145440"},"Children":[{"Type":"NodeText","Data":"当一个堆表上创建了非聚簇索引时，索引会存储数据的逻辑顺序（例如主键值或索引键值），而表本身仍然保持无序状态。"}]},{"ID":"20250516145440-bq5nyzc","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516145440-bq5nyzc","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"存储结构"}]},{"ID":"20250516145440-5u5en70","Type":"NodeList","ListData":{},"Properties":{"id":"20250516145440-5u5en70","updated":"20250516145440"},"Children":[{"ID":"20250516145440-2cgb9ki","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516145440-2cgb9ki","updated":"20250516145440"},"Children":[{"ID":"20250516145440-ovrepi1","Type":"NodeParagraph","Properties":{"id":"20250516145440-ovrepi1","updated":"20250516145440"},"Children":[{"Type":"NodeText","Data":"表（Heap Table）：数据存储在无序的行中。"}]}]},{"ID":"20250516145440-uv4x00x","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516145440-uv4x00x","updated":"20250516145440"},"Children":[{"ID":"20250516145440-ler0ve3","Type":"NodeParagraph","Properties":{"id":"20250516145440-ler0ve3","updated":"20250516145440"},"Children":[{"Type":"NodeText","Data":"非聚簇索引（Nonclustered Index）：存储索引键值及其指向表中数据行的指针（Row ID 或 RID）。"}]}]}]},{"ID":"20250516145440-ktgmksh","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516145440-ktgmksh","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"优点"}]},{"ID":"20250516145440-jsknq68","Type":"NodeList","ListData":{},"Properties":{"id":"20250516145440-jsknq68","updated":"20250516145440"},"Children":[{"ID":"20250516145440-egss7f8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516145440-egss7f8","updated":"20250516145440"},"Children":[{"ID":"20250516145440-ly23ext","Type":"NodeParagraph","Properties":{"id":"20250516145440-ly23ext","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"灵活的索引支持"},{"Type":"NodeText","Data":"：可以在堆表上创建多个非聚簇索引，提高查询性能。"}]}]},{"ID":"20250516145440-cp7ulwj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516145440-cp7ulwj","updated":"20250516145440"},"Children":[{"ID":"20250516145440-936jmux","Type":"NodeParagraph","Properties":{"id":"20250516145440-936jmux","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"适合频繁插入"},{"Type":"NodeText","Data":"：由于堆表无序，插入操作不会影响索引结构。"}]}]}]},{"ID":"20250516145440-9jizg0k","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516145440-9jizg0k","updated":"20250516152236"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"缺点"}]},{"ID":"20250516145440-lwcxtss","Type":"NodeList","ListData":{},"Properties":{"id":"20250516145440-lwcxtss","updated":"20250516145440"},"Children":[{"ID":"20250516145440-02ofpop","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516145440-02ofpop","updated":"20250516145440"},"Children":[{"ID":"20250516145440-iurad21","Type":"NodeParagraph","Properties":{"id":"20250516145440-iurad21","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"查询效率低"},{"Type":"NodeText","Data":"：如果没有适当的索引，查询可能需要全表扫描。"}]}]},{"ID":"20250516145440-pctiojx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516145440-pctiojx","updated":"20250516145440"},"Children":[{"ID":"20250516145440-haqbx14","Type":"NodeParagraph","Properties":{"id":"20250516145440-haqbx14","updated":"20250516145440"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"维护成本高"},{"Type":"NodeText","Data":"：索引的更新需要额外的开销。"}]}]}]},{"ID":"20250516145440-na06zfu","Type":"NodeThematicBreak","Properties":{"id":"20250516145440-na06zfu","updated":"20250516145440"}},{"ID":"20250516145440-ppxcvyp","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516145440-ppxcvyp","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"总结"}]},{"ID":"20250516145440-oux7mx1","Type":"NodeList","ListData":{},"Properties":{"id":"20250516145440-oux7mx1","updated":"20250516145440"},"Children":[{"ID":"20250516145440-0jpohyz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516145440-0jpohyz","updated":"20250516145440"},"Children":[{"ID":"20250516145440-8gaowlu","Type":"NodeParagraph","Properties":{"id":"20250516145440-8gaowlu","updated":"20250516145440"},"Children":[{"Type":"NodeText","Data":"堆表是一种无序的表结构，适合频繁插入操作。"}]}]},{"ID":"20250516145440-vhw6yh5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516145440-vhw6yh5","updated":"20250516145440"},"Children":[{"ID":"20250516145440-1pjjbwr","Type":"NodeParagraph","Properties":{"id":"20250516145440-1pjjbwr","updated":"20250516145440"},"Children":[{"Type":"NodeText","Data":"非聚簇索引是一种独立于表的索引结构，可以加速查询。"}]}]},{"ID":"20250516145440-ttofkvd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516145440-ttofkvd","updated":"20250516145440"},"Children":[{"ID":"20250516145440-2ronga3","Type":"NodeParagraph","Properties":{"id":"20250516145440-2ronga3","updated":"20250516145440"},"Children":[{"Type":"NodeText","Data":"堆表 + 非聚簇索引的组合适用于某些特定场景，但在设计时需要权衡插入和查询的性能需求。"}]}]}]},{"ID":"20250516150546-b8ruxr2","Type":"NodeParagraph","Properties":{"id":"20250516150546-b8ruxr2","updated":"20250516150546"}},{"ID":"20250516150548-g4lgner","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516150548-g4lgner","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"一、堆表与堆数据结构的关系：命名的“巧合”而非逻辑关联"}]},{"ID":"20250516150548-z6dzmi0","Type":"NodeParagraph","Properties":{"id":"20250516150548-z6dzmi0","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"首先需要明确："},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"数据库中的“堆表”（Heap Table）与计算机科学中的“堆”（Heap）数据结构没有任何逻辑或实现上的关联"},{"Type":"NodeText","Data":"，二者是完全不同的概念。这种命名更多是早期数据库设计者对“无序存储”特性的一种类比。"}]},{"ID":"20250516150548-4wgc1cx","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516150548-4wgc1cx","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"1. 堆数据结构的本质"}]},{"ID":"20250516150548-alo9ogf","Type":"NodeParagraph","Properties":{"id":"20250516150548-alo9ogf","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"计算机科学中的堆是一种基于完全二叉树的非线性数据结构，核心特性是："}]},{"ID":"20250516150548-ube4bft","Type":"NodeList","ListData":{},"Properties":{"id":"20250516150548-ube4bft","updated":"20250516150548"},"Children":[{"ID":"20250516150548-iflw41w","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516150548-iflw41w","updated":"20250516150548"},"Children":[{"ID":"20250516150548-1n0igtd","Type":"NodeParagraph","Properties":{"id":"20250516150548-1n0igtd","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"大顶堆：父节点值 ≥ 子节点值"}]}]},{"ID":"20250516150548-ftupsgi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516150548-ftupsgi","updated":"20250516150548"},"Children":[{"ID":"20250516150548-5cdtl73","Type":"NodeParagraph","Properties":{"id":"20250516150548-5cdtl73","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"小顶堆：父节点值 ≤ 子节点值\n其核心用途是高效维护集合中的极值（如优先队列），时间复杂度为O(log n)。"}]}]}]},{"ID":"20250516150548-cxqbpo4","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516150548-cxqbpo4","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"2. 堆表的本质"}]},{"ID":"20250516150548-1t1236n","Type":"NodeParagraph","Properties":{"id":"20250516150548-1t1236n","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"数据库中的堆表是"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"没有聚簇索引的表"},{"Type":"NodeText","Data":"，其核心特性是："}]},{"ID":"20250516150548-mm4c4d7","Type":"NodeList","ListData":{},"Properties":{"id":"20250516150548-mm4c4d7","updated":"20250516150548"},"Children":[{"ID":"20250516150548-eqe2x2a","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516150548-eqe2x2a","updated":"20250516150548"},"Children":[{"ID":"20250516150548-jzl86qr","Type":"NodeParagraph","Properties":{"id":"20250516150548-jzl86qr","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"数据行在磁盘上的存储是无序的（没有按任何键值排序）"}]}]},{"ID":"20250516150548-hb67zjq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516150548-hb67zjq","updated":"20250516150548"},"Children":[{"ID":"20250516150548-uv5je1p","Type":"NodeParagraph","Properties":{"id":"20250516150548-uv5je1p","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"数据行的物理位置由数据库引擎随机分配（类似内存堆的“动态分配、无固定顺序”特性）\n因此，“堆表”的命名仅借用了“堆”在“无序存储”这一表层特征的类比，二者在数据组织、操作逻辑上完全无关。"}]}]}]},{"ID":"20250516150548-6jxtwq2","Type":"NodeThematicBreak","Properties":{"id":"20250516150548-6jxtwq2","updated":"20250516150548"}},{"ID":"20250516150548-qob49tt","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516150548-qob49tt","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"二、堆表的核心优缺点分析"}]},{"ID":"20250516150548-ydkyatq","Type":"NodeParagraph","Properties":{"id":"20250516150548-ydkyatq","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"堆表的设计选择本质是"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"插入性能与查询性能的权衡"},{"Type":"NodeText","Data":"，其优缺点需结合具体业务场景理解："}]},{"ID":"20250516150548-qfn97zd","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516150548-qfn97zd","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"优点：适合“写多查少”场景"}]},{"ID":"20250516150548-fpl23qr","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250516150548-fpl23qr","updated":"20250516150548"},"Children":[{"ID":"20250516150548-jxvs096","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250516150548-jxvs096","updated":"20250516150548"},"Children":[{"ID":"20250516150548-edm4m8z","Type":"NodeParagraph","Properties":{"id":"20250516150548-edm4m8z","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"插入效率高"},{"Type":"NodeText","Data":"\n堆表无需维护数据的物理顺序（无聚簇索引），新数据可直接追加到空闲页或随机分配存储空间，无需移动已有数据。例如：向100GB的堆表插入1万条新记录，耗时可能仅为聚簇索引表的1/3（无需调整索引树结构）。"}]}]},{"ID":"20250516150548-acrqaqn","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250516150548-acrqaqn","updated":"20250516150548"},"Children":[{"ID":"20250516150548-s77ix1v","Type":"NodeParagraph","Properties":{"id":"20250516150548-s77ix1v","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"空间利用率初期更优"},{"Type":"NodeText","Data":"\n聚簇索引表需要为索引键预留排序空间（如B+树的页分裂预分配），而堆表仅存储原始数据，初始阶段空间浪费更少（但长期运行后可能因碎片问题反转）。"}]}]},{"ID":"20250516150548-43dtmqs","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250516150548-43dtmqs","updated":"20250516150548"},"Children":[{"ID":"20250516150548-lqo5436","Type":"NodeParagraph","Properties":{"id":"20250516150548-lqo5436","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"灵活性高"},{"Type":"NodeText","Data":"\n堆表支持创建多个非聚簇索引（如SQL Server最多249个），可针对不同查询模式动态添加索引，适合业务需求频繁变化的场景（如测试环境、临时数据存储）。"}]},{"ID":"20250516150647-3xj13i0","Type":"NodeParagraph","Properties":{"id":"20250516150647-3xj13i0","updated":"20250516150647"}}]}]},{"ID":"20250516150548-hovn4qw","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516150548-hovn4qw","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"缺点：“读多写少”场景的噩梦"}]},{"ID":"20250516150548-u7znhxr","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250516150548-u7znhxr","updated":"20250516150548"},"Children":[{"ID":"20250516150548-0r02605","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250516150548-0r02605","updated":"20250516150548"},"Children":[{"ID":"20250516150548-bpupf9l","Type":"NodeParagraph","Properties":{"id":"20250516150548-bpupf9l","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"无索引时查询性能极差"},{"Type":"NodeText","Data":"\n堆表的查询若未命中索引，必须执行全表扫描（Table Scan），需要遍历所有数据页。例如：查询100万行堆表的某条记录，最坏情况下需扫描10,000个数据页（假设每页100行），而聚簇索引表通过索引可直接定位到1-3个页。"}]}]},{"ID":"20250516150548-7753a70","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250516150548-7753a70","updated":"20250516150548"},"Children":[{"ID":"20250516150548-tux6nzu","Type":"NodeParagraph","Properties":{"id":"20250516150548-tux6nzu","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"索引维护成本高"},{"Type":"NodeText","Data":"\n非聚簇索引需要存储“行定位符”（Row Locator，如RID或堆表中的物理地址），当数据页分裂或行迁移时，所有关联的非聚簇索引都需更新指针。例如：堆表删除大量数据后，空闲空间可能被重新利用，导致行物理地址变化，触发索引批量更新。"}]}]},{"ID":"20250516150548-il9v7z6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250516150548-il9v7z6","updated":"20250516150548"},"Children":[{"ID":"20250516150548-v35bco7","Type":"NodeParagraph","Properties":{"id":"20250516150548-v35bco7","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"空间碎片严重"},{"Type":"NodeText","Data":"\n堆表的无序插入会导致数据页碎片化（Free Space分散在多个页中），即使使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"DBCC SHRINKFILE"},{"Type":"NodeText","Data":"​收缩空间，也无法完全消除逻辑碎片（数据行在页内不连续）。例如：一个10GB的堆表，可能实际有效数据仅6GB，剩余4GB为碎片空间。"}]}]},{"ID":"20250516150548-f1677rb","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20250516150548-f1677rb","updated":"20250516150548"},"Children":[{"ID":"20250516150548-lvgn9jv","Type":"NodeParagraph","Properties":{"id":"20250516150548-lvgn9jv","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"不支持范围查询优化"},{"Type":"NodeText","Data":"\n聚簇索引表可利用“索引有序性”优化范围查询（如"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"WHERE id BETWEEN 100 AND 200"},{"Type":"NodeText","Data":"​），直接扫描索引的连续页；而堆表的非聚簇索引即使按id排序，也需通过指针跳转到不同数据页，产生大量随机I/O。"}]}]}]},{"ID":"20250516150548-5do5uej","Type":"NodeThematicBreak","Properties":{"id":"20250516150548-5do5uej","updated":"20250516150548"}},{"ID":"20250516150548-ha70p7x","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516150548-ha70p7x","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"三、堆表的典型应用场景"}]},{"ID":"20250516150548-eakgc37","Type":"NodeParagraph","Properties":{"id":"20250516150548-eakgc37","updated":"20250516150548"},"Children":[{"Type":"NodeText","Data":"堆表的特性决定了它更适合以下场景："}]},{"ID":"20250516150548-5dspc1d","Type":"NodeList","ListData":{},"Properties":{"id":"20250516150548-5dspc1d","updated":"20250516150548"},"Children":[{"ID":"20250516150548-8d8cnp9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516150548-8d8cnp9","updated":"20250516150548"},"Children":[{"ID":"20250516150548-4gf4scg","Type":"NodeParagraph","Properties":{"id":"20250516150548-4gf4scg","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"临时数据存储"},{"Type":"NodeText","Data":"：如ETL过程中的中间表、存储过程中的临时结果集（插入后短时间内删除）。"}]}]},{"ID":"20250516150548-jxqj0uy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516150548-jxqj0uy","updated":"20250516150548"},"Children":[{"ID":"20250516150548-qaimi3e","Type":"NodeParagraph","Properties":{"id":"20250516150548-qaimi3e","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"写多读少的日志系统"},{"Type":"NodeText","Data":"：如用户行为日志（插入频繁，但查询仅针对最近数据，可通过时间字段的非聚簇索引优化）。"}]}]},{"ID":"20250516150548-8db5bvj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516150548-8db5bvj","updated":"20250516150548"},"Children":[{"ID":"20250516150548-smtlf53","Type":"NodeParagraph","Properties":{"id":"20250516150548-smtlf53","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"测试/开发环境"},{"Type":"NodeText","Data":"：快速创建表结构，无需提前设计复杂索引。"}]}]},{"ID":"20250516150548-e2wh2g9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516150548-e2wh2g9","updated":"20250516150548"},"Children":[{"ID":"20250516150548-egiatqb","Type":"NodeParagraph","Properties":{"id":"20250516150548-egiatqb","updated":"20250516150548"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"批量数据加载"},{"Type":"NodeText","Data":"：如使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BULK INSERT"},{"Type":"NodeText","Data":"​导入数据时，堆表的插入速度比聚簇索引表快30%-50%（无需维护索引树）。"}]}]}]}]}