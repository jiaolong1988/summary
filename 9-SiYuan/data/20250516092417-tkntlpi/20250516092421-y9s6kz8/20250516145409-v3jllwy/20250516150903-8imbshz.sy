{"ID":"20250516150903-8imbshz","Spec":"1","Type":"NodeDocument","Properties":{"id":"20250516150903-8imbshz","title":"oracle 堆表，IOT,与聚簇索引有啥区别","type":"doc","updated":"20250516164621"},"Children":[{"ID":"20250516150903-p7x2xc9","Type":"NodeParagraph","Properties":{"id":"20250516150903-p7x2xc9","updated":"20250516151317"},"Children":[{"Type":"NodeText","Data":"IOT（Index-Organized Table）是Oracle中的一种表类型，它将数据行存储在索引结构中，而不是传统的堆表结构。"}]},{"ID":"20250516151341-ohqud3y","Type":"NodeParagraph","Properties":{"id":"20250516151341-ohqud3y","updated":"20250516151341"},"Children":[{"Type":"NodeText","Data":"传统堆表的数据和索引是分开存储的，而IOT的数据直接存储在B*树索引的叶子节点中，这样数据按主键顺序物理存储，类似于聚簇索引的效果，但更紧密。"}]},{"ID":"20250516164620-8qf1u5g","Type":"NodeParagraph","Properties":{"id":"20250516164620-8qf1u5g","updated":"20250516164620"}},{"ID":"20250516164620-3g100ex","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20250516164620-3g100ex","updated":"20250516164621"},"Children":[{"Type":"NodeText","Data":"oracle 堆表，IOT,与聚簇索引有啥区别"}]},{"ID":"20250516164636-mv4iru7","Type":"NodeParagraph","Properties":{"id":"20250516164636-mv4iru7","updated":"20250516164636"},"Children":[{"Type":"NodeText","Data":"接下来需要对比三者的原理："}]},{"ID":"20250516164636-fx6ktxu","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20250516164636-fx6ktxu","updated":"20250516164636"},"Children":[{"ID":"20250516164636-y7t3rml","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20250516164636-y7t3rml","updated":"20250516164636"},"Children":[{"ID":"20250516164636-dm9jgoh","Type":"NodeParagraph","Properties":{"id":"20250516164636-dm9jgoh","updated":"20250516164636"},"Children":[{"Type":"NodeText","Data":"堆表：数据无序存储，索引（如主键索引）存储键值和对应的ROWID（物理地址），查询时通过索引找到ROWID，再根据ROWID读取数据块。"}]}]},{"ID":"20250516164636-c3usqp1","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20250516164636-c3usqp1","updated":"20250516164636"},"Children":[{"ID":"20250516164636-6elw44v","Type":"NodeParagraph","Properties":{"id":"20250516164636-6elw44v","updated":"20250516164636"},"Children":[{"Type":"NodeText","Data":"IOT：数据按主键物理排序，主键索引的叶子节点直接包含数据行（或主块+溢出段），索引结构即数据存储结构，没有独立的堆。"}]}]},{"ID":"20250516164636-qdvjabr","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20250516164636-qdvjabr","updated":"20250516164636"},"Children":[{"ID":"20250516164636-y9z7pce","Type":"NodeParagraph","Properties":{"id":"20250516164636-y9z7pce","updated":"20250516164636"},"Children":[{"Type":"NodeText","Data":"聚簇表（Oracle中的Cluster）：多个表的行共享聚簇键，存储在同一数据块中，减少I/O，适用于经常一起查询的表（如订单和订单明细表共享订单ID）。聚簇索引是基于聚簇键的索引，用于定位聚簇中的数据块。"}]}]}]},{"ID":"20250516164636-5hg14i9","Type":"NodeParagraph","Properties":{"id":"20250516164636-5hg14i9","updated":"20250516164636"},"Children":[{"Type":"NodeText","Data":"通俗理解方面，可以用图书馆的例子："}]},{"ID":"20250516164636-9t5ywro","Type":"NodeList","ListData":{},"Properties":{"id":"20250516164636-9t5ywro","updated":"20250516164636"},"Children":[{"ID":"20250516164636-ereo7p9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164636-ereo7p9","updated":"20250516164636"},"Children":[{"ID":"20250516164636-rblq259","Type":"NodeParagraph","Properties":{"id":"20250516164636-rblq259","updated":"20250516164636"},"Children":[{"Type":"NodeText","Data":"堆表：像一本没有目录的书，所有页面（数据块）随机存放内容（数据行），要找特定内容（查询）需要先查目录（索引），目录记录内容所在的页码（ROWID），然后翻到对应页码（数据块）找内容。"}]}]},{"ID":"20250516164636-rofim4d","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164636-rofim4d","updated":"20250516164636"},"Children":[{"ID":"20250516164636-cyyjwov","Type":"NodeParagraph","Properties":{"id":"20250516164636-cyyjwov","updated":"20250516164636"},"Children":[{"Type":"NodeText","Data":"IOT：像一本按章节（主键）顺序排列的书，目录（主键索引）的每一页（叶子节点）直接包含该章节的全部内容（数据行），不需要额外翻页，目录即内容。"}]}]},{"ID":"20250516164636-7oyt4d7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164636-7oyt4d7","updated":"20250516164636"},"Children":[{"ID":"20250516164636-absxac1","Type":"NodeParagraph","Properties":{"id":"20250516164636-absxac1","updated":"20250516164636"},"Children":[{"Type":"NodeText","Data":"聚簇表：像多本书（多个表）的相关章节（共享聚簇键的行）被装订在一起，比如订单表和订单明细表的同一订单ID的行在同一页（数据块），查订单时可以同时拿到明细，减少翻页次数（I/O）。"}]}]}]},{"ID":"20250516164712-1tzkv3m","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516164712-1tzkv3m","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"一、先通俗理解三者本质（用图书馆打比方）"}]},{"ID":"20250516164712-0l7p8eh","Type":"NodeParagraph","Properties":{"id":"20250516164712-0l7p8eh","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"假设你要找一本《SQL从入门到精通》的书，不同存储方式就像图书馆不同的藏书策略："}]},{"ID":"20250516164712-4yzaa7o","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516164712-4yzaa7o","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"1. 堆表（Heap Table）—— 随机堆放的仓库"}]},{"ID":"20250516164712-rivaikg","Type":"NodeList","ListData":{},"Properties":{"id":"20250516164712-rivaikg","updated":"20250516164712"},"Children":[{"ID":"20250516164712-260498c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-260498c","updated":"20250516164712"},"Children":[{"ID":"20250516164712-tzfrm4x","Type":"NodeParagraph","Properties":{"id":"20250516164712-tzfrm4x","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"存储方式"},{"Type":"NodeText","Data":"：所有书（数据行）被随机塞进书架（数据块），没有固定顺序。新书（插入数据）会被放到最近的空位，旧书（删除数据）的位置可能空着，导致书架杂乱。"}]}]},{"ID":"20250516164712-hw0ufpj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-hw0ufpj","updated":"20250516164712"},"Children":[{"ID":"20250516164712-zbhshgd","Type":"NodeParagraph","Properties":{"id":"20250516164712-zbhshgd","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"找书方式"},{"Type":"NodeText","Data":"：必须依赖“图书索引卡”（普通索引）：索引卡上记录书名（键值）和书所在的书架编号+层号（ROWID）。你需要先查索引卡找到位置，再去对应书架翻找。"}]}]},{"ID":"20250516164712-ql6ka1d","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-ql6ka1d","updated":"20250516164712"},"Children":[{"ID":"20250516164712-qj9yw4k","Type":"NodeParagraph","Properties":{"id":"20250516164712-qj9yw4k","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"特点"},{"Type":"NodeText","Data":"：灵活但低效，适合“啥书都可能被查”的通用场景。"}]}]}]},{"ID":"20250516164712-leobxjs","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516164712-leobxjs","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"2. IOT（索引组织表）—— 按书名排序的书架"}]},{"ID":"20250516164712-u0z5tui","Type":"NodeList","ListData":{},"Properties":{"id":"20250516164712-u0z5tui","updated":"20250516164712"},"Children":[{"ID":"20250516164712-8h4l2j3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-8h4l2j3","updated":"20250516164712"},"Children":[{"ID":"20250516164712-b2ea5ow","Type":"NodeParagraph","Properties":{"id":"20250516164712-b2ea5ow","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"存储方式"},{"Type":"NodeText","Data":"：所有书直接按书名（主键）顺序摆放在书架上，“索引卡”（主键索引）和“书本身”是同一份东西。比如书名A开头的书全在第一排，B开头的在第二排，以此类推。"}]}]},{"ID":"20250516164712-t7ey3fr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-t7ey3fr","updated":"20250516164712"},"Children":[{"ID":"20250516164712-ktw5p0b","Type":"NodeParagraph","Properties":{"id":"20250516164712-ktw5p0b","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"找书方式"},{"Type":"NodeText","Data":"：不需要额外的索引卡！直接按书名顺序找，比如找《SQL...》，知道S在字母表后面，直接去最后几排扫一眼就能找到。"}]}]},{"ID":"20250516164712-flmn029","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-flmn029","updated":"20250516164712"},"Children":[{"ID":"20250516164712-88j60x2","Type":"NodeParagraph","Properties":{"id":"20250516164712-88j60x2","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"特点"},{"Type":"NodeText","Data":"：查特定顺序的书极快，但改书名（更新主键）会很麻烦（需要重新搬书调整位置）。"}]}]}]},{"ID":"20250516164712-bvqjctk","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516164712-bvqjctk","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"3. 聚簇表（Cluster Table）—— 主题相关书捆在一起"}]},{"ID":"20250516164712-fyd12ie","Type":"NodeList","ListData":{},"Properties":{"id":"20250516164712-fyd12ie","updated":"20250516164712"},"Children":[{"ID":"20250516164712-50crhvc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-50crhvc","updated":"20250516164712"},"Children":[{"ID":"20250516164712-b2qhhz1","Type":"NodeParagraph","Properties":{"id":"20250516164712-b2qhhz1","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"存储方式"},{"Type":"NodeText","Data":"：把经常一起看的书（关联表的行）捆成一摞（共享聚簇键）。比如“订单表”和“订单明细表”中同一订单ID的行，会被塞到同一张书架隔板里。"}]}]},{"ID":"20250516164712-d4wyt6z","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-d4wyt6z","updated":"20250516164712"},"Children":[{"ID":"20250516164712-sfmkv8i","Type":"NodeParagraph","Properties":{"id":"20250516164712-sfmkv8i","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"找书方式"},{"Type":"NodeText","Data":"：只需要查一个“主题索引”（聚簇索引），找到这摞书的位置，就能同时拿到订单和明细，不用分别查两个书架。"}]}]},{"ID":"20250516164712-jscfarw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-jscfarw","updated":"20250516164712"},"Children":[{"ID":"20250516164712-i9pv3ul","Type":"NodeParagraph","Properties":{"id":"20250516164712-i9pv3ul","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"特点"},{"Type":"NodeText","Data":"：关联查询快，但如果只查其中一类书（比如只查订单不查明细），可能浪费空间（因为必须捆在一起）。"}]}]}]},{"ID":"20250516164712-egkgh3s","Type":"NodeThematicBreak","Properties":{"id":"20250516164712-egkgh3s","updated":"20250516164712"}},{"ID":"20250516164712-2tygp91","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516164712-2tygp91","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"二、技术原理对比（存储结构与访问逻辑）"}]},{"ID":"20250516164712-1vabx1h","Type":"NodeTable","TableAligns":[0,0,0,0],"Properties":{"colgroup":"|||","id":"20250516164712-1vabx1h","updated":"20250516164712"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"特性"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"堆表（Heap Table）"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"IOT（索引组织表）"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"聚簇表（Cluster Table）"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"核心存储结构"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"数据行无序存储在堆中（数据块随机分配）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"数据行直接存储在主键索引的叶子节点中（B"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"*"}]},{"Type":"NodeText","Data":"树结构即数据结构）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"多个表的相关行共享聚簇键，存储在同一数据块中"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"索引与数据的关系"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"索引（如主键索引）独立存在，存储键值+ROWID（数据物理地址）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"主键索引即数据存储结构，叶子节点包含完整数据（或主块+溢出指针）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"聚簇索引存储聚簇键+数据块地址，数据块包含多表的关联行"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"数据访问方式"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"索引查询→通过ROWID定位数据块（2次I/O）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"主键索引遍历→直接访问叶子节点数据（1次I/O，溢出列可能多1次）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"聚簇索引查询→访问共享数据块（1次I/O获取多表数据）"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"数据排序性"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"数据物理无序（逻辑顺序由索引维护）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"数据按主键物理排序（B"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"*"}]},{"Type":"NodeText","Data":"树叶子节点有序）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"数据按聚簇键物理排序（共享块内有序）"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"适用场景"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"通用场景（增删改查无明显规律）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"主键/范围查询频繁（如订单表按订单号查询）"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"多表关联查询频繁（如订单+订单明细一起查）"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"局限性"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"高频主键查询需2次I/O，空间利用率低"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"主键更新成本高（需调整B"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"*"}]},{"Type":"NodeText","Data":"树结构），大字段需溢出段"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"单表查询效率可能下降（共享块可能包含冗余数据）"}]}]}]},{"ID":"20250516164712-o146gmo","Type":"NodeThematicBreak","Properties":{"id":"20250516164712-o146gmo","updated":"20250516164712"}},{"ID":"20250516164712-g785m24","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516164712-g785m24","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"三、关键技术细节（深入理解差异）"}]},{"ID":"20250516164712-28m7n8q","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516164712-28m7n8q","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"1. 堆表：“索引是地图，数据是宝藏”"}]},{"ID":"20250516164712-mkfbnq1","Type":"NodeList","ListData":{},"Properties":{"id":"20250516164712-mkfbnq1","updated":"20250516164712"},"Children":[{"ID":"20250516164712-mzhxvu7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-mzhxvu7","updated":"20250516164712"},"Children":[{"ID":"20250516164712-j2milxy","Type":"NodeParagraph","Properties":{"id":"20250516164712-j2milxy","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"数据行的物理位置（ROWID）由“文件号+块号+槽位号”组成，像“藏宝图坐标”。"}]}]},{"ID":"20250516164712-su0509h","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-su0509h","updated":"20250516164712"},"Children":[{"ID":"20250516164712-4lk0xyi","Type":"NodeParagraph","Properties":{"id":"20250516164712-4lk0xyi","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"主键索引是“地图”，记录“宝藏名称（主键值）→坐标（ROWID）”，查询时先查地图找坐标，再按坐标挖宝藏（读数据块）。"}]}]},{"ID":"20250516164712-kscbccb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-kscbccb","updated":"20250516164712"},"Children":[{"ID":"20250516164712-p9tt3ll","Type":"NodeParagraph","Properties":{"id":"20250516164712-p9tt3ll","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"缺点：如果经常按主键查，每次都要“查地图+挖宝藏”，两次I/O。"}]}]}]},{"ID":"20250516164712-51f25yx","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516164712-51f25yx","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"2. IOT：“索引是书架，书就插在索引里”"}]},{"ID":"20250516164712-gebseuh","Type":"NodeList","ListData":{},"Properties":{"id":"20250516164712-gebseuh","updated":"20250516164712"},"Children":[{"ID":"20250516164712-t2rnzdq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-t2rnzdq","updated":"20250516164712"},"Children":[{"ID":"20250516164712-4wy9ezz","Type":"NodeParagraph","Properties":{"id":"20250516164712-4wy9ezz","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"主键索引的叶子节点直接“插”着数据行（或主块存常用列，溢出段存大字段）。比如主键是订单号，索引的叶子节点里直接放着订单的客户、金额等信息，不需要额外的“藏宝图”。"}]}]},{"ID":"20250516164712-q6kovc7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-q6kovc7","updated":"20250516164712"},"Children":[{"ID":"20250516164712-kwx4e0i","Type":"NodeParagraph","Properties":{"id":"20250516164712-kwx4e0i","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"优点：按主键或范围查（如订单号1000-2000）时，直接扫描索引的叶子节点，像在书架上按顺序翻书，效率极高。"}]}]},{"ID":"20250516164712-24xkope","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-24xkope","updated":"20250516164712"},"Children":[{"ID":"20250516164712-ypqxdh2","Type":"NodeParagraph","Properties":{"id":"20250516164712-ypqxdh2","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"缺点：改订单号（主键）等于要把这本书从“1000”的位置拔出来，重新插到“3000”的位置，可能导致整层书架（B"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"*"}]},{"Type":"NodeText","Data":"树节点）重组，成本高。"}]}]}]},{"ID":"20250516164712-mmsnep1","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20250516164712-mmsnep1","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"3. 聚簇表：“关联的书捆一起，查一次得一摞”"}]},{"ID":"20250516164712-vcobm2g","Type":"NodeList","ListData":{},"Properties":{"id":"20250516164712-vcobm2g","updated":"20250516164712"},"Children":[{"ID":"20250516164712-xc3iduo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-xc3iduo","updated":"20250516164712"},"Children":[{"ID":"20250516164712-utbj624","Type":"NodeParagraph","Properties":{"id":"20250516164712-utbj624","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"聚簇键（如订单ID）是“捆书的绳子”，订单表和订单明细表中同一订单ID的行被塞进同一块数据块。"}]}]},{"ID":"20250516164712-hj709r5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-hj709r5","updated":"20250516164712"},"Children":[{"ID":"20250516164712-a5q9n2w","Type":"NodeParagraph","Properties":{"id":"20250516164712-a5q9n2w","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"聚簇索引是“捆绳索引”，记录“订单ID→数据块位置”，查订单时，直接拿到整个数据块，里面同时有订单和明细。"}]}]},{"ID":"20250516164712-28tlcv2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-28tlcv2","updated":"20250516164712"},"Children":[{"ID":"20250516164712-3o742z8","Type":"NodeParagraph","Properties":{"id":"20250516164712-3o742z8","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"优点：关联查询（如“查订单及明细”）只需1次I/O，比分别查两个堆表（2次I/O）快很多。"}]}]},{"ID":"20250516164712-4oe0kle","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-4oe0kle","updated":"20250516164712"},"Children":[{"ID":"20250516164712-8svvi9k","Type":"NodeParagraph","Properties":{"id":"20250516164712-8svvi9k","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"缺点：如果只查订单表（不查明细），数据块里可能塞了很多用不到的明细数据，浪费空间。"}]}]}]},{"ID":"20250516164712-bxeh15b","Type":"NodeThematicBreak","Properties":{"id":"20250516164712-bxeh15b","updated":"20250516164712"}},{"ID":"20250516164712-8sskvzm","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20250516164712-8sskvzm","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"四、总结：如何选择？"}]},{"ID":"20250516164712-qctpezq","Type":"NodeList","ListData":{},"Properties":{"id":"20250516164712-qctpezq","updated":"20250516164712"},"Children":[{"ID":"20250516164712-rd398qb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-rd398qb","updated":"20250516164712"},"Children":[{"ID":"20250516164712-6a7er0f","Type":"NodeParagraph","Properties":{"id":"20250516164712-6a7er0f","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"选堆表"},{"Type":"NodeText","Data":"：业务场景无明显查询规律（增删改查都有），或需要频繁更新主键（如用户ID可能变更）。"}]}]},{"ID":"20250516164712-ycj8trh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-ycj8trh","updated":"20250516164712"},"Children":[{"ID":"20250516164712-b0irz3t","Type":"NodeParagraph","Properties":{"id":"20250516164712-b0irz3t","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"选IOT"},{"Type":"NodeText","Data":"：高频按主键或范围查询（如电商订单按订单号查、按时间范围统计），且主键稳定（不常更新）。"}]}]},{"ID":"20250516164712-jrods18","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20250516164712-jrods18","updated":"20250516164712"},"Children":[{"ID":"20250516164712-2ig66yr","Type":"NodeParagraph","Properties":{"id":"20250516164712-2ig66yr","updated":"20250516164712"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"选聚簇表"},{"Type":"NodeText","Data":"：多表关联查询极频繁（如订单+订单明细每天查10万次），且单表查询较少（避免空间浪费）。"}]}]}]},{"ID":"20250516164712-hzchuua","Type":"NodeParagraph","Properties":{"id":"20250516164712-hzchuua","updated":"20250516164712"},"Children":[{"Type":"NodeText","Data":"用一句话概括三者差异：\n"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"堆表是“通用仓库”，IOT是“按序陈列的展示架”，聚簇表是“关联商品的组合货架”"},{"Type":"NodeText","Data":"。根据业务的查询模式和数据特点，选择最适合的存储结构，才能最大化Oracle的性能。"}]}]}